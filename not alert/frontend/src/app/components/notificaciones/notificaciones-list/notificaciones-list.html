<div class="container">
  <div class="header">
    <h1>Notificaciones</h1>
    <button class="btn btn-primary" (click)="crearNotificacion()">
      + Nueva Notificaci√≥n
    </button>
  </div>

  <div *ngIf="loading" class="loading">
    ‚è≥ Cargando notificaciones...
  </div>

  <div *ngIf="error" class="error">
    ‚ùå {{ error }}
    <br>
    <small>Verifica que el backend est√© corriendo en http://localhost:3000</small>
    <br>
    <button class="btn btn-secondary" (click)="loadNotificaciones()" style="margin-top: 1rem;">
      Reintentar
    </button>
  </div>

  <div *ngIf="!loading && !error" class="notificaciones-grid">
    <div *ngFor="let notificacion of notificaciones" 
         class="notificacion-card"
         [class.leida]="notificacion.leido"
         [class]="getTipoClass(notificacion.tipo)">
      <div class="notificacion-header">
        <div class="notificacion-titulo">
          <h3>{{ notificacion.titulo }}</h3>
          <span class="badge" [ngClass]="getTipoClass(notificacion.tipo)">
            {{ notificacion.tipo }}
          </span>
        </div>
        <div class="notificacion-fecha">
          {{ formatFecha(notificacion.fecha) }}
        </div>
      </div>
      
      <div class="notificacion-mensaje">
        {{ notificacion.mensaje }}
      </div>

      <div class="notificacion-footer">
        <div class="estado">
          <span *ngIf="!notificacion.leido" class="no-leida">No le√≠da</span>
          <span *ngIf="notificacion.leido" class="leida-badge">Le√≠da</span>
        </div>
        <div class="acciones">
          <button *ngIf="!notificacion.leido" 
                  class="btn btn-sm btn-secondary"
                  (click)="marcarComoLeido(notificacion)">
            Marcar como le√≠da
          </button>
          <button class="btn btn-sm btn-edit" (click)="editarNotificacion(notificacion.id_notificacion)">
            Editar
          </button>
          <button class="btn btn-sm btn-danger" (click)="eliminarNotificacion(notificacion.id_notificacion)">
            Eliminar
          </button>
        </div>
      </div>
    </div>

    <div *ngIf="notificaciones.length === 0" class="empty-state">
      <p>üì≠ No hay notificaciones disponibles</p>
      <p><small>Puedes crear una nueva notificaci√≥n usando el bot√≥n de arriba</small></p>
    </div>
  </div>
</div>
